{
  "entities": {
    "Cliente": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Cliente",
      "type": "object",
      "description": "Represents a customer in the system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Cliente entity."
        },
        "nome": {
          "type": "string",
          "description": "The full name of the customer."
        },
        "email": {
          "type": "string",
          "description": "The email address of the customer.",
          "format": "email"
        },
        "telefone": {
          "type": "string",
          "description": "The phone number of the customer."
        },
        "endereco": {
          "type": "string",
          "description": "The full address of the customer."
        },
        "informacoesAdicionais": {
          "type": "string",
          "description": "Any additional information about the customer."
        }
      },
      "required": [
        "id",
        "nome",
        "email",
        "telefone",
        "endereco"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}/clientes/{clienteId}",
        "definition": {
          "entityName": "Cliente",
          "schema": {
            "$ref": "#/backend/entities/Cliente"
          },
          "description": "Stores customer data owned by a specific user. Uses path-based ownership for simple and robust security rules.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier of the user."
            },
            {
              "name": "clienteId",
              "description": "The unique identifier of the customer."
            }
          ]
        }
      }
    ],
    "reasoning": "Based on the requirements, the data structure will prioritize storing customer data securely and enabling efficient retrieval. Since there's no explicit collaboration or complex access control specified, a path-based ownership model under the `/users/{userId}/clientes/{clienteId}` collection is ideal. This design ensures that each user owns their customer data. The `Cliente` entity data is stored in a way that access control can be easily implemented through Firebase security rules.\n\nThis structure facilitates Authorization Independence by ensuring that access to `clientes` is directly tied to the user's ID. There is no reliance on parent document data for authorization. The security rules can be written to only allow a user to access their own customers.\n\nRegarding QAPs, this structure inherently supports secure list operations because the security rules can restrict listing `clientes` to only the authenticated user's customer records, preventing unauthorized access to other users' data. Because all `clientes` are owned by a user, we can easily apply the same security rules to all documents in the `clientes` collection."
  }
}